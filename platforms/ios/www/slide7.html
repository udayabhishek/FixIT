<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Screen 7</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="css/font-awesome.css">
       <script type="text/javascript">
    var image = "http://in.shikshainfotech.com/FixIT/Uploads/serviceprovider-profile-images/";
    var jsonData_profilePic = "";
    var count=0;
        function populateListView()
        {
                 var wrapper = $(".container");
                 var newDate = new Date();
                 var day = getWeekDay(newDate);
                 var hours = newDate.getHours();
                                
                 $.ajax({
                 type: "POST",
                 url: "http://in.shikshainfotech.com/FixIT/activeproviderslist.php?",
                 data:'kindOfWork=1&zipcode=12345&day='+day+'&time='+hours,
                 success: function (data) {

                  //alert("SUCCESS :"+data);
                
                  for(var i=0;i<data.length;i++)
                  {
                    var jsonData_fullname = JSON.stringify(data[i].firstName).split('"').join('');;
                    var jsonData_lastName = JSON.stringify(data[i].lastName).split('"').join('');;
                    var name = jsonData_fullname+"  "+jsonData_lastName;
                    var profile_pic = JSON.stringify(data[i].profilePic).split('"').join('');
                    jsonData_profilePic = image+profile_pic;
                    var jsonData_town = JSON.stringify(data[i].town).split('"').join('');
                    var jsonData_state = JSON.stringify(data[i].state).split('"').join('');
                    var jsonData_charge = JSON.stringify(data[i].charge).split('"').join('');
                    var jsonData_rating = JSON.stringify(data[i].Overall_Rating).split('"').join('');
                    //alert(jsonData_profilePic);

                    $(wrapper).append('<div class="form-group" id="profile-image"><div class="row"><div class="col-xs-4 col-sm-4"><img src="'+jsonData_profilePic+'" class="img-circle img-H-W"></div><div class="col-xs-8 col-sm-8" style="padding-right:5px;"><label for="exampleInputEmail1">'+name+'</label><label class="details" for="exampleInputEmail1">Town, State: <span>'+jsonData_town+', '+jsonData_state+'</span></label><label class="details" for="exampleInputEmail1">Range of Hourly Quote: <span>'+jsonData_charge+'</span></label><label class="details" for="exampleInputEmail1">Rating: <span id="RatingPlumber" class="glyphicon glyphicon-star"></span><span id="RatingPlumber" class="glyphicon glyphicon-star"></span><span id="RatingPlumber" class="glyphicon glyphicon-star"></span><span id="RatingPlumber" class="glyphicon glyphicon-star"></span><span id="RatingPlumber" class="glyphicon glyphicon-star"></span></label><img src="img/icon-gps.png" class="gps" alt=""><!--<img src="img/icon-add.png" class="add" alt="">--><button  class="native-hidden add" type="button" checked="checked" id="accept">Accept</button></div></div></div>');
                  }
            

                 },
                 error: function (jqXHR, textStatus, errorThrown) {
                 alert('Error'+ errorThrown + textStatus + jqXHR);
                 
                 }
                 }); 


                 }
                 function getWeekDay(date) {
                  var days = ['sun','mon','tue','wed','thu','fri','sat']

                  return days[ date.getDay() ]
                }
                 
                 
                 
                 
               /* $("#selected").on("click", function()
                {
                   
                  alert("Checked");
                  var size = $('.native-hidden add:checked').size();
                  $("#plumbers_selected").text(size);
                  
                });*/

                /*   $(document).on('change',function (e) {

                    if(this.checked) 
                    {
                        count ++;
                        alert('clicked :'+count);
                        $("#plumbers_selected").text(count);
                    }
                    else if(!this.checked) {
                        count --;
                        alert('clicked :'+count);
                        $("#plumbers_selected").text(count);
                  });
                 */
/*$("#checky").click(function(){

     alert("checked");
    if($(this).attr('checked') == true){
          count++;
          alert(count);
           $("#plumbers_selected").text(count);
    }
    else {
        count--;
         alert(count);
         $("#plumbers_selected").text(count);
    }
});
*/

    </script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body onload="populateListView(); ">
<!--    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">-->
<!--            <div class="col-xs-9 col-sm-6 text-right" style="color:#fff;padding-top: 10px; float-right"><h4>Choose a Professional</h4></div>-->
<!--            <div class="col-xs-3 col-sm-6  navbar-header">-->
<!--                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">-->
<!--                    <span class="sr-only">Toggle navigation</span>-->
<!--                    <span class="icon-bar"></span>-->
<!--                    <span class="icon-bar"></span>-->
<!--                    <span class="icon-bar"></span>-->
<!--                </button>-->
<!--            </div>-->
<!--            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">-->
<!--                -->
<!--            </div>-->
<!--  -->
<!--    </nav>-->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <!-- <div class="container"> -->
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="col-xs-2 col-sm-2 text-left"
        style="color: #fff;  padding: 10px 0 0 10px  ; ">
        <button type="button" class="navbar-toggle" data-toggle="collapse"
            id="back-button-id" >
            <i class="fa fa-chevron-left"></i>
        </button>
    </div>
    <div class="col-xs-9 col-sm-9 text-center"
        style="color: #fff; padding-top: 15px;">
        <h4>Choose a Professional7</h4>
    </div>
    <div class="col-xs-1 col-sm-1  navbar-header text-right" style="padding-top: 10px;">
        <!--        <button type="button" class="navbar-toggle" data-toggle="collapse"-->
        <!--            id="settings_button">-->
        <!--            <span class="sr-only">Toggle navigation</span> <span-->
        <!--                class="icon-bar"></span> <span class="icon-bar"></span> <span-->
        <!--                    class="icon-bar"></span>-->
        <!--        </button>-->
        <!-- <a class="navbar-brand" href="#">Start Bootstrap</a> -->
    </div>
</nav>

    <section style="margin-top:90px;color:#000">
      <form>
      <div class="container">
          <div class="form-group">
              <p>Hourly Quote Range indicates the labor charges and can be used only to estimate the price.</p>
          </div>
          
       
        
      </div>
          
          <div class="modal fade" id="myModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="ModelTopBorder"></div>
                  <div class="modal-body">
                      <label>Job Accepted</label>
                      <p>Your Fixit Pro, <script type="text/javascript">
                      document.write(sessionStorage.getItem('name'));
                      </script> is on the way!</p>
                  </div>
                    
                  <div class="modal-footer" id="ModalButton">
                    <div class="btn-group btn-group-justified" role="group" aria-label="group button">
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-new" role="button" data-dismiss="modal">CONTACT</button>
                      </div>
                      <div class="btn-group" role="group">
                        <button type="button" class="btn btn-new" role="button" data-dismiss="modal">OK</button>
                      </div> 
                    </div>
                </div> 
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
          
        <!--<div class="modal-footer navbar-fixed-bottom" id="button">
            <div class="col-xs-12 col-sm-12 text-left plumberSelected">
                <label class="details" for="exampleInputEmail1">Plumbers Selected: <span>0</span></label>
            </div>
            <div class="btn-group btn-group-justified" role="group" aria-label="group button">
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-default" role="button">Continue</button>
              </div> 
            </div>
        </div>-->
          
      </form>
    </section>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/ionic.min.js"></script>
    <script type="text/javascript" src="js/internet_connection.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
 
      
    <script type="text/javascript">
        $(window).load(function(){
            $('#myModal').modal('show');
        });
  
      $(function() {
          $("#selectedFile").on("change", function()
          {
              var files = !!this.files ? this.files : [];
              if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support
       
              if (/^image/.test( files[0].type)){ // only image file
                  var reader = new FileReader(); // instance of the FileReader
                  reader.readAsDataURL(files[0]); // read the local file
       
                  reader.onloadend = function(){ // set image data as background of div
                      $("#imagePreview").css("background-image", "url("+this.result+")");
                  }
              }
          });
      });
    </script>

  </body>
</html>